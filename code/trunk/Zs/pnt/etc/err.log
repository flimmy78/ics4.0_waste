1863c1863
< 
---
>   
1945a1946,2005
> 		</FlowCtrl>
> 	</Transaction>
> 
> 	<Transaction code="461588" desc="查询柜面缴费状态">	  
> 		<DynSentence name="MultiQuery"> 
> 			<Sentence>
>          select * from PntTxnjnl where ActDat='%s' and TCrpCd='%s' and BilSts='B' or BilSts='R'
> 			</Sentence>
> 			<Fields>PayDat|TCrpCd|</Fields>
> 		</DynSentence>			
> 		<FlowCtrl>
> 					<Exec func="PUB:InitTransaction"/>
> 					<Exec func="PUB:MultiQuery" />
> 				  <If condition="~RetCod!=0">
> 						<Set>RspCod=PNT999</Set>
> 						<Set>RspMsg=无记录</Set>
> 		        <Return/>
> 					</If>
> 		</FlowCtrl>
> 	</Transaction>
> 
> 	<Transaction code="461566" desc="柜面冲正缴费">	  
> 		<DynSentence name="UpdTxnBokC"> 
> 			<Sentence>
>          update pnttxnbok set BilSts='C' where BankCd='%s' and TVchId='%s' and TCrpCd='%s' and TBilTp='%s' and TBilNo='%s'
> 			</Sentence>
> 			<Fields>BankCd|TVchId|TCrpCd|TBilTp|TBilNo|</Fields>
> 		</DynSentence>			
> 		<FlowCtrl>
>       <Set>BankCd=442000010</Set><!--财局指定银行号-->
> 			<Exec func="PUB:CallThirdOther" error="IGNORE">
> 				<Arg name="TxnCod" value="314"/>
> 				<Arg name="ObjSvr" value="STHDPNT1"/>
> 			</Exec>
> 			<If condition="IS_EQUAL_STRING($Rtncod,100)">
> 			    <Exec func="PUB:ExecSql">
> 			    	<Arg name="SqlCmd" value="UpdTxnBokC"/>
> 			    </Exec>
> 			</If>	 
> 		</FlowCtrl>
> 	</Transaction>
> 
> 	<Transaction code="461567" desc="柜面冲正确认">
> 		<DynSentence name="UpdPntTxnJnlD"> 
> 			<Sentence>
>          update pnttxnbok set BilSts='D' where BankCd='%s' and TVchId='%s' and TCrpCd='%s' and BilSts='C'
> 			</Sentence>
> 			<Fields>BankCd|TVchId|TCrpCd|</Fields>
> 		</DynSentence>	
> 		<FlowCtrl>
>       <Set>BankCd=442000010</Set><!--财局指定银行号-->
> 			<Exec func="PUB:CallThirdOther" error="IGNORE">
> 				<Arg name="TxnCod" value="320"/>
> 				<Arg name="ObjSvr" value="STHDPNT1"/>
> 			</Exec>
> 			<If condition="IS_EQUAL_STRING($Rtncod,100)">
> 			    <Exec func="PUB:ExecSql">
> 			    	<Arg name="SqlCmd" value="UpdTxnBok"/>
> 			    </Exec>
> 			</If>							
