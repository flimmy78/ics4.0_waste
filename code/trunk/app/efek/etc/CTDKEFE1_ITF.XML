<?xml version='1.0' encoding='ISO-8859-1'?>
<!--广东电网来账接口  -->
<!--
<Application name="EFE" server="OFTKEFE2">
-->
<Application name="EFE" server="OFRTEFEK">
  <CodeSwitching>
    <Table name="DWBM_CAgtNo" file="etc/EFE_CSW_441999.XML">
      <Column name="DWBM" sort="no"/>
      <Column name="CAgtNo" sort="no"/>
    </Table>
    <Table name="RspCodToJYFHDM" file="etc/EFE_CSW_441999.XML">
      <Column name="RspCod" sort="no"/>
      <Column name="JYFHDM" sort="no"/>
    </Table>
  </CodeSwitching>

  <GetTxnCode>
    <Item type="fixed" offset="96" length="2"/>
  </GetTxnCode>

  <Include file="app/efek/etc/TDKEFE1_IIT.XML"/>

  <Transaction code="20" service="460420" log_switch="5" des="供电方发起批量代扣交易请求">
    <Request>
      <Quote name="RcvReqHead"/>
      <Group name="Rec" repeat_name="PKGCNT">
        <Item name="JYLSH"  length="24" desc="交易流水号"/>
        <Item name="JYRQ"   length=" 8" desc="交易日期"/>
        <Item name="JYSJ"   length=" 6" desc="交易时间"/>
        <Item name="DWBM"   length=" 8" desc="单位编码"/>
        <Item name="RZYHDM" length=" 4" desc="入账银行代码"/>
        <Item name="SFFS"   length=" 3" desc="收费方式"/>
        <Item name="WJMC"   length="36" desc="文件名称"/>
        <Item name="WJLX"   length=" 2" desc="文件类型"/>
        <Item name="WJMD5"  length="32" desc="文件MD5"/>
        <Item name="ZBS"    length="11" desc="总笔数"/>
        <Item name="ZJE"    length="16" desc="总金额"/>
      </Group>
      <SwitchCode name="DWBM" new_name="CAgtNo" tab_name="DWBM_CAgtNo" col_name="DWBM"/>
      <AddItem name="TxnCnl" value="THD"/>
    </Request>
    <Response necessary="no">
      <Quote name="RcvStdRsp"/>
    </Response>
  </Transaction>


  <Transaction code="22" service="460422" log_switch="5" des="供电方发起单笔代扣交易请求">
    <Request>
      <Quote name="RcvReqHead"/>
      <Item name="WDMC"   length="64" desc="网点名称"/>
      <Item name="JYLSH"  length="24" desc="交易流水号"/>
      <Item name="JYRQ"   length=" 8" desc="交易日期"/>
      <Item name="JYSJ"   length=" 6" desc="交易时间"/>
      <Item name="SFFS"   length=" 3" desc="收费方式"/>
      <Item name="FYLX"   length=" 3" desc="费用类型"/>
      <Item name="DWBM"   length=" 8" desc="单位编码"/>
      <Item name="JFH"    length="20" desc="缴费号"/>
      <Item name="KKYHDM" length=" 4" desc="扣款银行代码"/>
      <Item name="KKZH"   length="32" expression="DELSPACE($KKZH,both)" desc="扣款账户"/>
      <Item name="KKZHMC" length="128" desc="扣款账户名称"/>
      <Item name="BFJFBZ" length=" 1" desc="部分缴费标志"/>
      <Item name="ZWLSH"  length="16" desc="账务流水号"/>
      <Item name="DFNY"   length=" 6" desc="电费年月"/>
      <Item name="HBFH"   length=" 5" desc="货币符号"/>
      <Item name="KFJE"   length="16" desc="扣费金额"/>
      <Item name="BJ"     length="16" desc="本金"/>
      <Item name="WYJ"    length="16" desc="违约金"/>
      <Item name="YFFBZ"  length=" 1" desc="预付费标志"/>
      <Item name="YFFJE"  length="16" desc="预付费金额"/>
      <Item name="XJYDGJXX" length="128" desc="需校验的关键信息"/>
      <SwitchCode name="DWBM" new_name="CAgtNo"  tab_name="DWBM_CAgtNo"  col_name="DWBM"/>
      <AddItem name="TxnCnl"  value="THD"/>
    </Request>
    <Response necessary="no">
      <Switch expression="$MsgTyp">
        <Case value="N">
          <PackItem name="TmpDat">
            <Quote name="RcvRspHead"/>
            <Item name="YHJYLSH"  length="24" desc="交易流水号"/>
            <Item name="YHJYRQ"   length=" 8" desc="交易日期"/>
            <Item name="YHJYSJ"   length=" 6" desc="交易时间"/>
            <Item name="YJYLSH" length="24" desc="原交易流水号"/>
            <Item name="YJYRQ"  length=" 8" desc="原交易日期"/>
            <Item name="YJYSJ"  length=" 6" desc="原交易时间"/>
            <Item name="SFFS"   length=" 3" desc="收费方式"/>
            <Item name="FYLX"   length=" 3" desc="费用类型"/>
            <Item name="DWBM"   length=" 8" desc="缴费号"/>
            <Item name="JFH"    length="20" desc="缴费号"/>
            <Item name="KKYHDM" length=" 4" desc="扣款银行代码"/>
            <Item name="KKZH"   length="32" desc="扣款账户"/>
            <Item name="KKZHMC" length="128" desc="扣款账户名称"/>
            <Item name="BFJFBZ" length=" 1" desc="部分缴费标志"/>
            <Item name="ZWLSH"  length="16" desc="账务流水号"/>
            <Item name="DFNY"   length=" 6" desc="电费年月"/>
            <Item name="HBFH"   length=" 5" desc="货币符号"/>
            <Item name="KFJE"   length="16" desc="扣费金额"/>
            <Item name="BJ"     length="16" desc="本金"/>
            <Item name="WYJ"    length="16" desc="违约金"/>
            <Item name="YFFBZ"  length=" 1" desc="预付费标志"/>
            <Item name="YFFJE"  length="16" desc="预付费金额"/>
            <Item name="SKJE"   length="16" expression="$KFJE" desc="实扣金额"/>
            <Item name="XJYDGJXX" length="128" desc="需校验的关键信息"/>
            <Item name="KKRQ"   length=" 8" expression="$YHJYRQ" desc="扣款日期"/>
            <Item name="KKSJ"   length=" 6" expression="$YHJYSJ" desc="扣款时间"/>
          </PackItem>
          <Item name="TmpDat" head_len="10" include_len="no"/>
          <Break/>
        </Case>
        <Case value="E">
          <Quote name="ErrCase"/>
          <Break/>
        </Case>
        <Default>
          <Break/>
        </Default>
      </Switch> 
    </Response>
  </Transaction>


  <Transaction code="23" service="460423" log_switch="5" des="供电方发起单笔当日代扣抹帐交易请求">
    <Request>
      <Quote name="RcvReqHead"/>
      <Group name="Rec" repeat_name="PKGCNT">
        <Item name="WDMC"   length="64" desc="网点名称"/>
        <Item name="JYLSH"  length="24" desc="交易流水号"/>
        <Item name="JYRQ"   length=" 8" desc="交易日期"/>
        <Item name="JYSJ"   length=" 6" desc="交易时间"/>
        <Item name="YJYLSH" length="24" desc="原交易流水号"/>
        <Item name="YJYRQ"  length=" 8" desc="原交易日期"/>
        <Item name="YJYSJ"  length=" 6" desc="原交易时间"/>
        <Item name="SFFS"   length=" 3" desc="收费方式"/>
        <Item name="FYLX"   length=" 3" desc="费用类型"/>
        <Item name="DWBM"   length=" 8" desc="单位编码"/>
        <Item name="JFH"    length="20" desc="缴费号"/>
        <Item name="DFNY"   length=" 6" desc="电费年月"/>
        <Item name="KKYHDM" length=" 4" desc="扣款银行代码"/>
        <Item name="KKZH"   length="32" desc="扣款账户"/>
        <Item name="KKZHMC" length="128" desc="扣款账户名称"/>
        <Item name="YSKJE"  length="16" desc="原实扣金额"/>
        <Item name="MZJE"   length="16" desc="抹账金额"/>
      </Group>
      <SwitchCode name="DWBM" new_name="CAgtNo"  tab_name="DWBM_CAgtNo"  col_name="DWBM"/>
      <AddItem name="TxnCnl"  value="THD"/>
    </Request>
    <Response necessary="no">
      <Quote name="RcvStdRsp"/>
    </Response>
  </Transaction>



  <Transaction code="32" service="460432" log_switch="5" des="供电方发起供电到银行变更代扣协议请求">
    <Request>
      <Quote name="RcvReqHead"/>
      <Group name="Rec" repeat_name="PKGCNT">
        <Item name="WDMC"  length="64" desc="网点名称"/>
        <Item name="JYLSH" length="24" desc="交易流水号"/>
        <Item name="JYRQ"  length=" 8" desc="交易日期"/>
        <Item name="JYSJ"  length=" 6" desc="交易时间"/>
        <Item name="QDBZ"  length=" 1" desc="签订标志"/>
        <Item name="DWBM"  length=" 8" desc="单位编码"/>
        <Item name="JFH"   length="20" desc="缴费号"/>
        <Item name="JSHMC" length="64" desc="结算户名称"/>
        <Item name="YQYYHDM" length=" 4" desc="原签约银行代码"/>
        <Item name="YQYZH"   length="32" desc="原签约账户"/>
        <Item name="YQYZHMC" length="128" desc="原签约账号名称"/>
        <Item name="XQYYHDM" length=" 4" desc="新签约银行代码"/>
        <Item name="XQYZH"   length="32" desc="新签约账户"/>
        <Item name="XQYZHMC" length="128" desc="新签约账户名称"/>
        <Item name="ZHLX"    length=" 2" desc="账户类型"/>
        <Item name="ZJLX"    length=" 2" desc="证件类型"/>
        <Item name="ZJHM"    length="32" desc="证件号码"/>
        <Item name="LXDH"    length="20" desc="联系电话"/>
        <Item name="SJHM"    length="20" desc="手机号码"/>
        <Item name="EMAIL"   length="64" desc="E-MAIL"/>
        <Item name="BZ"      length="128" desc="备注"/>
        <Item name="QYZT"    length=" 1" desc="签约状态"/>
        <Item name="YJYLSH"  length="24" desc="原交易流水号"/>
        <Item name="YJYRQ"   length=" 8" desc="原交易日期"/>
        <Item name="YJYSJ"   length=" 6" desc="原交易时间"/>
      </Group>
      <SwitchCode name="DWBM" new_name="CAgtNo"  tab_name="DWBM_CAgtNo"  col_name="DWBM"/>
      <AddItem name="TxnCnl"  value="THD"/>
    </Request>
    <Response necessary="no">
      <Quote name="RcvStdRsp"/>
    </Response>
  </Transaction>




  <Transaction code="24" service="460424" log_switch="5" des="供电方发起批量代扣取消请求">
    <Request>
      <Quote name="RcvReqHead"/>
      <Group name="Rec" repeat_name="PKGCNT">
        <Item name="JYLSH"  length="24" desc="交易流水号"/>
        <Item name="JYRQ"   length=" 8" desc="交易日期"/>
        <Item name="JYSJ"   length=" 6" desc="交易时间"/>
        <Item name="YJYLSH" length="24" desc="原交易流水号"/>
        <Item name="YJYRQ"  length=" 8" desc="原交易日期"/>
        <Item name="YJYSJ"  length=" 6" desc="原交易时间"/>
        <Item name="DWBM"   length=" 8" desc="单位编码"/>
        <Item name="YWJMC"  length="36" desc="原文件名称"/>
        <Item name="WJLX"   length=" 2" desc="文件类型"/>
        <Item name="ZBS"    length="11" desc="总笔数"/>
        <Item name="ZJE"    length="16" desc="总金额"/>
        <Item name="BZ"     length="128" desc="备注"/>
      </Group>
      <SwitchCode name="DWBM" new_name="CAgtNo"  tab_name="DWBM_CAgtNo"  col_name="DWBM"/>
      <AddItem name="TxnCnl"  value="THD"/>
    </Request>
    <Response necessary="no">
      <Switch expression="$MsgTyp">
        <Case value="N">
          <Quote name="RcvRspHead"/>
            <Item name="YHJYLSH" length="24" desc="交易流水号"/>
            <Item name="YHJYRQ"  length=" 8" desc="交易日期"/>
            <Item name="YHJYSJ"  length=" 6" desc="交易时间"/>
            <Item name="YJYLSH" length="24" desc="原交易流水号"/>
            <Item name="YJYRQ"  length=" 8" desc="原交易日期"/>
            <Item name="YJYSJ"  length=" 6" desc="原交易时间"/>
            <Item name="DWBM"   length=" 8" desc="单位编码"/>
            <Item name="YWJMC"  length="36" desc="原文件名称"/>
            <Item name="WJLX"   length=" 2" desc="文件类型"/>
            <Item name="QXBZ"   length=" 2" desc="取消标志"/>
            <Item name="BZ"     length="128" desc="备注"/>
          <Break/>
        </Case>
        <Case value="E">
          <Quote name="ErrCase"/>
          <Break/>
        </Case>
        <Default>
          <Break/>
        </Default>
      </Switch> 
    </Response>
  </Transaction>



  <Transaction code="91" service="460491" log_switch="5" des="供电方发起银电业务开工交易请求">
    <Request>
      <Quote name="RcvReqHead"/>
      <Item name="PKGCNT" length="6" desc="子包个数"/>
      <Group name="Rec" repeat_name="PKGCNT">
        <Item name="JYLSH" length="24" desc="交易流水号"/>
        <Item name="JYRQ"  length=" 8" desc="交易日期"/>
        <Item name="JYSJ"  length=" 6" desc="交易时间"/>
        <Item name="DWBM"  length=" 8" desc="单位编码"/>
        <Item name="YWBSH" length=" 6" desc="业务标识号"/>
        <Item name="CZRY"  length="20" desc="操作人员"/>
        <Item name="ZT"    length=" 1" desc="状态"/>
        <Item name="BZ"    length="128" desc="备注"/>
      </Group>
    </Request>
    <Response necessary="no">
      <Quote name="RcvStdRsp"/>
    </Response>
  </Transaction>


  <Transaction code="92" service="460492" log_switch="5" des="供电方发起银电业务签退交易请求">
    <Request>
      <Quote name="RcvReqHead"/>
      <Item name="PKGCNT" length="6" desc="子包个数"/>
      <Group name="Rec" repeat_name="PKGCNT">
        <Item name="JYLSH" length="24" desc="交易流水号"/>
        <Item name="JYRQ"  length=" 8" desc="交易日期"/>
        <Item name="JYSJ"  length=" 6" desc="交易时间"/>
        <Item name="DWBM"  length=" 8" desc="单位编码"/>
        <Item name="YWBSH" length=" 6" desc="业务标识号"/>
        <Item name="CZRY"  length="20" desc="操作人员"/>
        <Item name="ZT"    length=" 1" desc="状态"/>
        <Item name="BZ"    length="128" desc="备注"/>
      </Group>
    </Request>
    <Response necessary="no">
      <Quote name="RcvStdRsp"/>
    </Response>
  </Transaction>



</Application>
